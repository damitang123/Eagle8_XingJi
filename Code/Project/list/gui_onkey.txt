; generated by Component: ARM Compiler 5.05 (build 41) Tool: ArmCC [4d0eb9]
; commandline ArmCC [--list --split_sections -c --asm --interleave -o.\obj\gui_onkey.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\obj\gui_onkey.d --cpu=Cortex-M3 --apcs=interwork -O3 -I..\Board_Support_Package -I..\Config -I..\GUI\Core -I..\GUI\JPEG -I..\GUI\LCDDriver -I..\GUI\MultiLayer -I..\GUI\Widget -I..\GUI\WM -I..\Libraries\CMSIS\CM3\CoreSupport -I..\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x -I..\Libraries\CMSIS\Include -I..\Libraries\STM32F10x_StdPeriph_Driver\inc -I..\User\Res -I..\User\UserWindow -I..\User -I..\USB\inc -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Keil_v5\ARM\Inc\ST\STM32F10x -D__MICROLIB -DSTM32F10X_HD -DVECT_TAB_FLASH -DUSE_STDPERIPH_DRIVER --no_multibyte_chars ..\GUI\Core\GUI_OnKey.c]
                          THUMB

                          AREA ||i.GUI_ClearKeyBuffer||, CODE, READONLY, ALIGN=2

                  GUI_ClearKeyBuffer PROC
;;;84     */
;;;85     void GUI_ClearKeyBuffer(void) {
000000  b500              PUSH     {lr}
;;;86       while (GUI_GetKey());
000002  bf00              NOP      
                  |L1.4|
000004  f7fffffe          BL       GUI_GetKey
000008  2800              CMP      r0,#0
00000a  d1fb              BNE      |L1.4|
;;;87     }
00000c  bd00              POP      {pc}
;;;88     
                          ENDP


                          AREA ||i.GUI_GetKey||, CODE, READONLY, ALIGN=2

                  GUI_GetKey PROC
;;;63     */
;;;64     int GUI_GetKey(void) {
000000  4902              LDR      r1,|L2.12|
;;;65       int r = _Key;
;;;66       _Key = 0;
000002  2200              MOVS     r2,#0
000004  6848              LDR      r0,[r1,#4]  ; _Key
000006  604a              STR      r2,[r1,#4]  ; _Key
;;;67       return r;
;;;68     }
000008  4770              BX       lr
;;;69     
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||.data||

                          AREA ||i.GUI_PollKeyMsg||, CODE, READONLY, ALIGN=2

                  GUI_PollKeyMsg PROC
;;;120    #if GUI_WINSUPPORT    /* If 0, WM will not generate any code */
;;;121    int GUI_PollKeyMsg(void) {
000000  b570              PUSH     {r4-r6,lr}
;;;122      int r = 0;
;;;123      GUI_LOCK();
;;;124      if (_KeyMsgCnt) {
000002  4a0b              LDR      r2,|L3.48|
000004  2000              MOVS     r0,#0                 ;122
000006  6811              LDR      r1,[r2,#0]            ;121  ; _KeyMsgCnt
000008  2900              CMP      r1,#0                 ;121
00000a  d00f              BEQ      |L3.44|
00000c  1e49              SUBS     r1,r1,#1              ;121
;;;125        int Key;
;;;126        _KeyMsgCnt--;
;;;127        Key = _KeyMsg.Key;
00000e  f1020408          ADD      r4,r2,#8
000012  6011              STR      r1,[r2,#0]  ; _KeyMsgCnt
000014  e9d45100          LDRD     r5,r1,[r4,#0]
;;;128        if (!WM_OnKey(Key, _KeyMsg.PressedCnt)) {
000018  4628              MOV      r0,r5
00001a  f7fffffe          BL       WM_OnKey
;;;129          #ifdef GUI_X_ON_UNPROCESSED_KEY
;;;130            GUI_X_ON_UNPROCESSED_KEY(Key, _KeyMsg.PressedCnt);
;;;131          #endif
;;;132        }
;;;133        if (_KeyMsg.PressedCnt == 1) {
00001e  6860              LDR      r0,[r4,#4]  ; _KeyMsg
000020  2801              CMP      r0,#1
000022  d102              BNE      |L3.42|
;;;134          GUI_StoreKey(Key);
000024  4628              MOV      r0,r5
000026  f7fffffe          BL       GUI_StoreKey
                  |L3.42|
;;;135        }
;;;136        r = 1;              /* We have done something */
00002a  2001              MOVS     r0,#1
                  |L3.44|
;;;137      }
;;;138      GUI_UNLOCK();
;;;139      return r;
;;;140    }
00002c  bd70              POP      {r4-r6,pc}
;;;141    #endif
                          ENDP

00002e  0000              DCW      0x0000
                  |L3.48|
                          DCD      ||.data||

                          AREA ||i.GUI_SendKeyMsg||, CODE, READONLY, ALIGN=1

                  GUI_SendKeyMsg PROC
;;;151    */
;;;152    void GUI_SendKeyMsg(int Key, int PressedCnt) {
000000  b570              PUSH     {r4-r6,lr}
000002  460c              MOV      r4,r1
000004  4605              MOV      r5,r0
;;;153      #if GUI_WINSUPPORT    /* If 0, WM will not generate any code */
;;;154        if (!WM_OnKey(Key, PressedCnt)) {
000006  f7fffffe          BL       WM_OnKey
00000a  2800              CMP      r0,#0
00000c  d105              BNE      |L4.26|
;;;155          #ifdef GUI_X_ON_UNPROCESSED_KEY
;;;156            GUI_X_ON_UNPROCESSED_KEY(Key, PressedCnt);
;;;157          #endif
;;;158          GUI_StoreKeyMsg(Key, PressedCnt);
00000e  4621              MOV      r1,r4
000010  4628              MOV      r0,r5
000012  e8bd4070          POP      {r4-r6,lr}
000016  f7ffbffe          B.W      GUI_StoreKeyMsg
                  |L4.26|
;;;159        }
;;;160      #else
;;;161        GUI_StoreKeyMsg(Key, PressedCnt);
;;;162      #endif
;;;163    }
00001a  bd70              POP      {r4-r6,pc}
;;;164    
                          ENDP


                          AREA ||i.GUI_StoreKey||, CODE, READONLY, ALIGN=2

                  GUI_StoreKey PROC
;;;73     */
;;;74     void GUI_StoreKey(int Key) {
000000  4902              LDR      r1,|L5.12|
000002  684a              LDR      r2,[r1,#4]  ; _Key
000004  2a00              CMP      r2,#0
000006  d100              BNE      |L5.10|
;;;75       if (!_Key) {
;;;76         _Key = Key;
000008  6048              STR      r0,[r1,#4]  ; _Key
                  |L5.10|
;;;77       }
;;;78       GUI_X_SIGNAL_EVENT();
;;;79     }
00000a  4770              BX       lr
;;;80     
                          ENDP

                  |L5.12|
                          DCD      ||.data||

                          AREA ||i.GUI_StoreKeyMsg||, CODE, READONLY, ALIGN=2

                  GUI_StoreKeyMsg PROC
;;;92     */
;;;93     void GUI_StoreKeyMsg(int Key, int PressedCnt) {
000000  4a03              LDR      r2,|L6.16|
;;;94       #if GUI_WINSUPPORT    /* If 0, WM will not generate any code */
;;;95       _KeyMsg.Key = Key;
000002  e9c20100          STRD     r0,r1,[r2,#0]
;;;96       _KeyMsg.PressedCnt = PressedCnt;
;;;97       _KeyMsgCnt = 1;
000006  f1a20108          SUB      r1,r2,#8
00000a  2001              MOVS     r0,#1
00000c  6008              STR      r0,[r1,#0]  ; _KeyMsgCnt
;;;98       #ifdef GUI_X_ON_UNPROCESSED_KEY
;;;99         if (!WM_IsActive) {
;;;100          /* If the WM is deactivated, key messages are not polled by the WM.
;;;101             So call the macro in this case here.
;;;102          */
;;;103          GUI_X_ON_UNPROCESSED_KEY(Key, PressedCnt);
;;;104        }
;;;105      #endif
;;;106      GUI_X_SIGNAL_EVENT();
;;;107      #else
;;;108        GUI_USE_PARA(PressedCnt);
;;;109        GUI_StoreKey(Key);
;;;110        #ifdef GUI_X_ON_UNPROCESSED_KEY
;;;111          GUI_X_ON_UNPROCESSED_KEY(Key, PressedCnt);
;;;112        #endif
;;;113      #endif
;;;114    }
00000e  4770              BX       lr
;;;115    
                          ENDP

                  |L6.16|
                          DCD      ||.data||+0x8

                          AREA ||.data||, DATA, ALIGN=2

                  _KeyMsgCnt
                          DCD      0x00000000
                  _Key
                          DCD      0x00000000
                  _KeyMsg
                          %        8

                          AREA ||area_number.10||, DATA, ALIGN=2

                          EXPORTAS ||area_number.10||, ||.data||
                  GUI_pfKeyMsgHook
                          DCD      0x00000000
