; generated by Component: ARM Compiler 5.05 (build 41) Tool: ArmCC [4d0eb9]
; commandline ArmCC [--list --split_sections -c --asm --interleave -o.\obj\wm_validate.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\obj\wm_validate.d --cpu=Cortex-M3 --apcs=interwork -O3 -I..\Board_Support_Package -I..\Config -I..\GUI\Core -I..\GUI\JPEG -I..\GUI\LCDDriver -I..\GUI\MultiLayer -I..\GUI\Widget -I..\GUI\WM -I..\Libraries\CMSIS\CM3\CoreSupport -I..\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x -I..\Libraries\CMSIS\Include -I..\Libraries\STM32F10x_StdPeriph_Driver\inc -I..\User\Res -I..\User\UserWindow -I..\User -I..\USB\inc -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Keil_v5\ARM\Inc\ST\STM32F10x -D__MICROLIB -DSTM32F10X_HD -DVECT_TAB_FLASH -DUSE_STDPERIPH_DRIVER --no_multibyte_chars ..\GUI\WM\WM_Validate.c]
                          THUMB

                          AREA ||i.WM_ValidateRect||, CODE, READONLY, ALIGN=2

                  WM_ValidateRect PROC
;;;79     */
;;;80     void WM_ValidateRect(WM_HWIN hWin, const GUI_RECT*pRect) {
000000  b570              PUSH     {r4-r6,lr}
000002  460d              MOV      r5,r1
000004  2800              CMP      r0,#0
000006  d01a              BEQ      |L1.62|
;;;81       WM_Obj* pWin;
;;;82       if (hWin) {
;;;83         WM_LOCK();
;;;84         pWin = WM_HANDLE2PTR(hWin);
000008  f7fffffe          BL       GUI_ALLOC_h2p
00000c  4604              MOV      r4,r0
;;;85         if (pWin->Status & WM_SF_INVALID) {
00000e  7f00              LDRB     r0,[r0,#0x1c]
000010  0680              LSLS     r0,r0,#26
000012  d514              BPL      |L1.62|
;;;86           if (pRect) {
000014  b15d              CBZ      r5,|L1.46|
;;;87             _SubRect(&pWin->InvalidRect, &pWin->InvalidRect, pRect);
000016  f1040108          ADD      r1,r4,#8
00001a  462a              MOV      r2,r5
00001c  460d              MOV      r5,r1
00001e  4608              MOV      r0,r1
000020  f7fffffe          BL       _SubRect
000024  4628              MOV      r0,r5
;;;88             if (WM__RectIsNZ(&pWin->InvalidRect))
000026  f7fffffe          BL       WM__RectIsNZ
00002a  2800              CMP      r0,#0
00002c  d107              BNE      |L1.62|
                  |L1.46|
;;;89               goto Done;
;;;90           }
;;;91           pWin->Status &= ~WM_SF_INVALID;
00002e  8ba0              LDRH     r0,[r4,#0x1c]
000030  f0200020          BIC      r0,r0,#0x20
000034  83a0              STRH     r0,[r4,#0x1c]
;;;92           WM__NumInvalidWindows--;
000036  4802              LDR      r0,|L1.64|
000038  8801              LDRH     r1,[r0,#0]  ; WM__NumInvalidWindows
00003a  1e49              SUBS     r1,r1,#1
00003c  8001              STRH     r1,[r0,#0]
                  |L1.62|
;;;93         }
;;;94       Done:
;;;95         WM_UNLOCK();
;;;96       }
;;;97     }
00003e  bd70              POP      {r4-r6,pc}
;;;98     
                          ENDP

                  |L1.64|
                          DCD      WM__NumInvalidWindows

                          AREA ||i._SubRect||, CODE, READONLY, ALIGN=1

                  _SubRect PROC
;;;49     */
;;;50     static void _SubRect(GUI_RECT* pDest, const GUI_RECT* pr0, const GUI_RECT* pr1) {
000000  b510              PUSH     {r4,lr}
000002  2800              CMP      r0,#0
000004  d03f              BEQ      |L2.134|
;;;51       if ((pDest == NULL) || (pr0 == NULL))
000006  2900              CMP      r1,#0
000008  d03d              BEQ      |L2.134|
;;;52         return;
;;;53       *pDest = *pr0;	 
00000a  680b              LDR      r3,[r1,#0]
00000c  6003              STR      r3,[r0,#0]
00000e  684b              LDR      r3,[r1,#4]
000010  6043              STR      r3,[r0,#4]
;;;54       if (pr1 == NULL)
000012  2a00              CMP      r2,#0
000014  d037              BEQ      |L2.134|
;;;55         return;
;;;56       /* Check left/right sides */
;;;57       if (  (pr1->y0 <= pr0->y0)
000016  f9b23002          LDRSH    r3,[r2,#2]
00001a  f9b14002          LDRSH    r4,[r1,#2]
00001e  42a3              CMP      r3,r4
000020  dc15              BGT      |L2.78|
;;;58           &&(pr1->y1 >= pr0->y1)) {
000022  f9b23006          LDRSH    r3,[r2,#6]
000026  f9b14006          LDRSH    r4,[r1,#6]
00002a  42a3              CMP      r3,r4
00002c  db0f              BLT      |L2.78|
;;;59         pDest->x0 = Max(pr0->x0, pr1->x1);
00002e  f9b14000          LDRSH    r4,[r1,#0]
000032  f9b23004          LDRSH    r3,[r2,#4]
000036  429c              CMP      r4,r3
000038  dd00              BLE      |L2.60|
00003a  4623              MOV      r3,r4
                  |L2.60|
00003c  8003              STRH     r3,[r0,#0]
;;;60         pDest->x1 = Min(pr0->x1, pr1->x0);
00003e  f9b14004          LDRSH    r4,[r1,#4]
000042  f9b23000          LDRSH    r3,[r2,#0]
000046  429c              CMP      r4,r3
000048  dc00              BGT      |L2.76|
00004a  4623              MOV      r3,r4
                  |L2.76|
00004c  8083              STRH     r3,[r0,#4]
                  |L2.78|
;;;61       }
;;;62       /* Check top/bottom sides */
;;;63       if (  (pr1->x0 <= pr0->x0)
00004e  f9b23000          LDRSH    r3,[r2,#0]
000052  f9b14000          LDRSH    r4,[r1,#0]
000056  42a3              CMP      r3,r4
000058  dc15              BGT      |L2.134|
;;;64           &&(pr1->x1 >= pr0->x1)) {
00005a  f9b23004          LDRSH    r3,[r2,#4]
00005e  f9b14004          LDRSH    r4,[r1,#4]
000062  42a3              CMP      r3,r4
000064  db0f              BLT      |L2.134|
;;;65         pDest->y0 = Max(pr0->y0, pr1->y1);
000066  f9b14002          LDRSH    r4,[r1,#2]
00006a  f9b23006          LDRSH    r3,[r2,#6]
00006e  429c              CMP      r4,r3
000070  dd00              BLE      |L2.116|
000072  4623              MOV      r3,r4
                  |L2.116|
000074  8043              STRH     r3,[r0,#2]
;;;66         pDest->y1 = Min(pr0->y1, pr1->y0);
000076  f9b11006          LDRSH    r1,[r1,#6]
00007a  f9b22002          LDRSH    r2,[r2,#2]
00007e  4291              CMP      r1,r2
000080  dd00              BLE      |L2.132|
000082  4611              MOV      r1,r2
                  |L2.132|
000084  80c1              STRH     r1,[r0,#6]
                  |L2.134|
;;;67       }
;;;68     }
000086  bd10              POP      {r4,pc}
;;;69     
                          ENDP

