; generated by Component: ARM Compiler 5.05 (build 41) Tool: ArmCC [4d0eb9]
; commandline ArmCC [--list --split_sections -c --asm --interleave -o.\obj\guiaaline.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\obj\guiaaline.d --cpu=Cortex-M3 --apcs=interwork -O3 -I..\Board_Support_Package -I..\Config -I..\GUI\Core -I..\GUI\JPEG -I..\GUI\LCDDriver -I..\GUI\MultiLayer -I..\GUI\Widget -I..\GUI\WM -I..\Libraries\CMSIS\CM3\CoreSupport -I..\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x -I..\Libraries\CMSIS\Include -I..\Libraries\STM32F10x_StdPeriph_Driver\inc -I..\User\Res -I..\User\UserWindow -I..\User -I..\USB\inc -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Keil_v5\ARM\Inc\ST\STM32F10x -D__MICROLIB -DSTM32F10X_HD -DVECT_TAB_FLASH -DUSE_STDPERIPH_DRIVER --no_multibyte_chars ..\GUI\AntiAlias\GUIAALine.c]
                          THUMB

                          AREA ||i.GUI_AA_DrawLine||, CODE, READONLY, ALIGN=1

                  GUI_AA_DrawLine PROC
;;;89     */
;;;90     void GUI_AA_DrawLine(int x0, int y0, int x1, int y1) {
000000  e92d41f0          PUSH     {r4-r8,lr}
000004  461c              MOV      r4,r3
000006  4615              MOV      r5,r2
000008  460e              MOV      r6,r1
00000a  4607              MOV      r7,r0
;;;91       GUI_LOCK();
;;;92       #if (GUI_WINSUPPORT)
;;;93         WM_ADDORG_AA(x0,y0);
00000c  f7fffffe          BL       WM__GetOrgX_AA
000010  4407              ADD      r7,r7,r0
000012  f7fffffe          BL       WM__GetOrgY_AA
000016  4406              ADD      r6,r6,r0
;;;94         WM_ADDORG_AA(x1,y1);
000018  f7fffffe          BL       WM__GetOrgX_AA
00001c  4405              ADD      r5,r5,r0
00001e  f7fffffe          BL       WM__GetOrgY_AA
000022  4404              ADD      r4,r4,r0
;;;95         WM_ITERATE_START(NULL); {
000024  2000              MOVS     r0,#0
000026  f7fffffe          BL       WM__InitIVRSearch
00002a  e007              B        |L1.60|
                  |L1.44|
;;;96       #endif
;;;97       _AA_DrawLine(x0, y0, x1, y1);
00002c  4623              MOV      r3,r4
00002e  462a              MOV      r2,r5
000030  4631              MOV      r1,r6
000032  4638              MOV      r0,r7
000034  f7fffffe          BL       _AA_DrawLine
;;;98       #if (GUI_WINSUPPORT)
;;;99         } WM_ITERATE_END();
000038  f7fffffe          BL       WM__GetNextIVR
                  |L1.60|
00003c  2800              CMP      r0,#0
00003e  d1f5              BNE      |L1.44|
;;;100      #endif
;;;101      GUI_UNLOCK();
;;;102    }
000040  e8bd81f0          POP      {r4-r8,pc}
;;;103    
                          ENDP


                          AREA ||i._AA_DrawLine||, CODE, READONLY, ALIGN=2

                  _AA_DrawLine PROC
;;;34     */
;;;35     static void _AA_DrawLine(int x0, int y0, int x1, int y1) {
000000  e92d5ff0          PUSH     {r4-r12,lr}
000004  4699              MOV      r9,r3
000006  4614              MOV      r4,r2
000008  468a              MOV      r10,r1
00000a  4605              MOV      r5,r0
;;;36       int xMin, xMax;
;;;37       U8 PenSizeOld = GUI_GetPenSize();
00000c  f7fffffe          BL       GUI_GetPenSize
;;;38       U8 PenSizeHR  = PenSizeOld * GUI_Context.AA_Factor;
000010  f8df809c          LDR      r8,|L2.176|
000014  4606              MOV      r6,r0                 ;37
000016  f8980060          LDRB     r0,[r8,#0x60]  ; GUI_Context
00001a  4370              MULS     r0,r6,r0
00001c  b2c7              UXTB     r7,r0
;;;39       U8 OldPenShape = GUI_SetPenShape(GUI_PS_FLAT);
00001e  2001              MOVS     r0,#1
000020  f7fffffe          BL       GUI_SetPenShape
000024  4683              MOV      r11,r0
;;;40       /* Calculate left and right borders for AA module */
;;;41       if (x0 < x1) {
000026  42a5              CMP      r5,r4
000028  da02              BGE      |L2.48|
;;;42         xMin = x0;
00002a  4628              MOV      r0,r5
;;;43         xMax = x1;
00002c  4621              MOV      r1,r4
00002e  e001              B        |L2.52|
                  |L2.48|
;;;44       } else {
;;;45         xMin = x1;
000030  4620              MOV      r0,r4
;;;46         xMax = x0;
000032  4629              MOV      r1,r5
                  |L2.52|
;;;47       }
;;;48       if (GUI_Context.AA_HiResEnable) {
000034  f8982061          LDRB     r2,[r8,#0x61]  ; GUI_Context
000038  b142              CBZ      r2,|L2.76|
;;;49         xMin -= PenSizeHR;
00003a  1bc2              SUBS     r2,r0,r7
;;;50         xMax += PenSizeHR;
00003c  19c8              ADDS     r0,r1,r7
;;;51         xMin /= GUI_Context.AA_Factor;
00003e  f8981060          LDRB     r1,[r8,#0x60]  ; GUI_Context
000042  fb92f2f1          SDIV     r2,r2,r1
;;;52         xMax /= GUI_Context.AA_Factor;
000046  fb90f1f1          SDIV     r1,r0,r1
00004a  e009              B        |L2.96|
                  |L2.76|
;;;53       } else {
;;;54         xMin -= PenSizeOld;
00004c  1b82              SUBS     r2,r0,r6
;;;55         xMax += PenSizeOld;
;;;56         x0 *= GUI_Context.AA_Factor;
00004e  f8980060          LDRB     r0,[r8,#0x60]  ; GUI_Context
000052  4431              ADD      r1,r1,r6              ;55
000054  4345              MULS     r5,r0,r5
;;;57         x1 *= GUI_Context.AA_Factor;
000056  4344              MULS     r4,r0,r4
;;;58         y0 *= GUI_Context.AA_Factor;
000058  fb0afa00          MUL      r10,r10,r0
;;;59         y1 *= GUI_Context.AA_Factor;
00005c  fb09f900          MUL      r9,r9,r0
                  |L2.96|
;;;60       }
;;;61       /* Do the actual drawing */
;;;62       GUI_AA_Init(xMin, xMax);
000060  4610              MOV      r0,r2
000062  f7fffffe          BL       GUI_AA_Init
;;;63       GUI_SetPenSize(PenSizeHR);
000066  4638              MOV      r0,r7
000068  f7fffffe          BL       GUI_SetPenSize
;;;64       GL_DrawLine(x0 , y0 , x1 ,  y1 );
00006c  464b              MOV      r3,r9
00006e  4622              MOV      r2,r4
000070  4651              MOV      r1,r10
000072  4628              MOV      r0,r5
000074  f7fffffe          BL       GL_DrawLine
;;;65       GUI_AA_Exit();
000078  f7fffffe          BL       GUI_AA_Exit
;;;66       /* Draw end points (can be optimized away in future, TBD*/
;;;67       switch (OldPenShape) {
00007c  f1bb0f00          CMP      r11,#0
000080  d10d              BNE      |L2.158|
;;;68       case GUI_PS_ROUND:
;;;69         {
;;;70           int r = GUI_Context.AA_Factor * PenSizeOld / 2;
000082  f8980060          LDRB     r0,[r8,#0x60]  ; GUI_Context
;;;71           GL_FillCircleAA_HiRes(x0 , y0 , r);
000086  4651              MOV      r1,r10
000088  4370              MULS     r0,r6,r0              ;70
00008a  0847              LSRS     r7,r0,#1              ;70
00008c  463a              MOV      r2,r7
00008e  4628              MOV      r0,r5
000090  f7fffffe          BL       GL_FillCircleAA_HiRes
;;;72           GL_FillCircleAA_HiRes(x1 , y1 , r);
000094  463a              MOV      r2,r7
000096  4649              MOV      r1,r9
000098  4620              MOV      r0,r4
00009a  f7fffffe          BL       GL_FillCircleAA_HiRes
                  |L2.158|
;;;73         }
;;;74         break;
;;;75       }
;;;76       GUI_SetPenSize(PenSizeOld);
00009e  4630              MOV      r0,r6
0000a0  f7fffffe          BL       GUI_SetPenSize
;;;77       GUI_SetPenShape(OldPenShape);
0000a4  4658              MOV      r0,r11
0000a6  e8bd5ff0          POP      {r4-r12,lr}
0000aa  f7ffbffe          B.W      GUI_SetPenShape
;;;78     }
;;;79     
                          ENDP

0000ae  0000              DCW      0x0000
                  |L2.176|
                          DCD      GUI_Context
